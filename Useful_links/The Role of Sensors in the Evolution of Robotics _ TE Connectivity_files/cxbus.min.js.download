/*!
 * cxbus
 * @version: 2.1.4
 * @license: Genesys Cloud Services, Inc.
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("cxbus",[],t):"object"==typeof exports?exports.cxbus=t():e.cxbus=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){var r;void 0===(r=function(){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){var a=n(1).Promise,i=Ae(),u="color:red;font-weight:bold",s="color:white;background:#6495ed",c="color:#555;font-style:italic",l="color:#6495ed;font-weight:bold",f=!1,d=!1,m=[],p={},b={},g={},h={},y=[],v={},w={},D={},x={},I={},N=[],C=window.Genesys&&window.Genesys.q&&q(window.Genesys.q,X)?window.Genesys.q:[],j=!1,k=null,T=!0,_=!1,E="",P="",M="plugin.min.js",O={},S={},A=!0,B=!1,G="*",L=!1,X="array",F=function(){},J={last:null,value:null},U="Could not load plugin file in given location. Check your plugins path option.";function R(e){if(q(e=function(e){var t={};for(var n in e)t[se(n)]=e[n];return t}(e),"object")){if(q(e.debug,"boolean")&&(j=e.debug),q(e.name,"string")&&e.name.trim().length>0&&(k=e.name.trim()),q(e.queue,X)&&e.debug,q(e.async,"boolean")&&(A=e.async),q(e.log,"boolean")&&(T=e.log),q(e.logstore,"boolean")&&(_=e.logstore),q(e.pluginspath,"string")&&(E=Ie(e.pluginspath)),q(e.modulespath,"string")&&(P=Ie(e.modulespath)),q(e.pluginfilenameformat,"string")&&(M=e.pluginfilenameformat),q(e.pluginmap,"object")&&(O=e.pluginmap),q(e.pluginmap,"string"))try{O=JSON.parse(e.pluginmap)}catch(t){ve("%cInvalid plugin map JSON. Ignoring "+e.pluginmap,u)}if(q(e.modulemap,"object")&&(S=e.modulemap),q(e.modulemap,"string"))try{S=JSON.parse(e.modulemap)}catch(t){ve("%cInvalid module map JSON. Ignoring "+e.modulemap,u)}if(q(e.childDomain,"string")&&(G=e.childDomain),q(e.allowtypescript,"boolean")&&(L=e.allowtypescript),q(e.childmode,"boolean")&&1==e.childmode)B=e.childmode,d=!0,(window.opener||window.parent).postMessage({type:"CXBus.childCallout",registry:Object.keys(b),busID:i,busName:k},"*");O=$(O),S=$(S),ve("%cGenesys configuration changed",s)}}function q(e,t){return t===X?!!Array.isArray(e):o(e)==t}function H(e,t,n){return ye(e,(function(r,a){var c=se(e),d=b[c];f&&!d&&void 0===t?qe({type:"CXBus.remoteExecution",subType:"registerPlugin",busID:i,pluginName:e}).then((function(e){"pass"===e.resolution?H(e.pluginName,!0).then((function(e){r(e)})):"fail"===e.resolution&&H(e.pluginName,!1).then((function(e){a(e)}))})):!f||f&&!d&&!0===t?"string"!=o(e)||d?d&&a("%cCan't register plugin "+we(e)+" -- Name is already taken",u,l,u):(b[c]={name:e,namespace:e,interface:oe(e),events:{},commands:{},data:{},buffer:[],ready:!1,busID:n||i},h[c]={events:[],commands:[]},b[c].busID==i&&ve("%c New Plugin Registered:"+we(" "+e),s,l),function(e){var t=e.interface;t.registerCommand("COMMANDS",(function(t){ae(e,"Commands"),t.resolve()})),t.registerCommand("EVENTS",(function(t){ae(e,"Events"),t.resolve()})),t.registerCommand("LOAD",(function(e){e.resolve()}))}(b[c]),b[c].interface.initData=w[c]||{},r(b[c].interface),w[c]&&delete w[c]):f&&!1===t&&a("%cCan't register plugin "+we(e)+" -- Name is already taken",u,l,u)}))}function Y(e){return"function"==o(e)&&(y.push(e),!0)}function W(e){e&&!e.mID&&(e.mID=Ae());for(var t=0;t<y.length;t++)y[t](e)}function $(e){var t={};for(var n in e)t[se(n)]=e[n];return t}function V(e,t){return ye(e||"unknown",(function(e,n){ve(t,u,l,u),n()}))}function z(e){return"string"==typeof e&&e.length>0&&e.trim().length>0}function Q(e,t,n){var r=se(e),a=M.replace("plugin",r),u=O[r]||void 0,c=!1;return"object"==o(u)?("string"==o(u.target)&&(c=u.target),"boolean"==o(u.module)&&u.module,"string"==o(u.src)&&(a=u.src)):"string"==o(u)?a=u:!1===u&&(a=!1),w[r]=t||{},function(e){for(var t in e.split(".").length>1&&(e=e.split(".")[0]),b)if(se(t)==se(e))return!0;return!1}(e)||D[se(e)]?V(e,"%cCan't load plugin ("+we(e)+") -- This plugin is already loaded or an unexpected error occurred."):z(n)?qe({type:"CXBus.remoteExecution",subType:"loadPlugin",busID:i,targetBus:n,pluginName:e,data:t}):(w[r]=t||{},z(c)?qe({type:"CXBus.remoteExecution",subType:"loadPlugin",busID:i,targetBus:c,pluginName:e,data:t}):(ve("%cLoading plugin: "+a,l),ye(e,(function(t,n){var r=function(n){!function(e){D[se(e)]=!0}(e),t(n)},o=function(){n("Could not load plugin file: "+a)};!1===a?(ve("%cNotice: "+a+" was prevented from loading by the current plugin mapping configuration.",s),n()):ne(u?a:E+a,r,o)}))))}function K(e){return ye("loadFile",(function(t,n){if(function(e){return x[e]}(e))ve("%cCan't load file ("+e+") -- This file was already loaded",u,l,u),n();else{ve("%cLoading file: "+e,l),ne(e,(function(n){!function(e){x[e]=!0}(e),t(n)}),(function(){n("Could not load file: "+e)}))}}))}function Z(e,t){return ye("loadJSON",(function(t,n){var r=new XMLHttpRequest;r.overrideMimeType("application/json"),r.open("GET",e,!0),r.onreadystatechange=function(){4==r.readyState&&"200"==r.status?r.responseText&&t(r.responseText):"200"!=r.status&&0!=r.status&&n("loadJSON failed with status code: "+r.status)},r.send(null)}))}function ee(e){var t=se(e);return ye("loadModule",(function(e,n){if(t&&I[t])setTimeout((function(){e(I[t])}),0);else{var r="module.mod.js".replace("module",t),a=S[t],i=""!==P?P:E,u=function(n){e(I[t])},c=function(){n("Could not load module: "+t)},l=!1;"object"==o(a)?("string"==o(a.target)&&a.target,"boolean"==o(a.module)&&(l=a.module),"string"==o(a.src)&&(r=a.src)):"string"==o(a)?r=a:!1===a&&(r=!1),!1===r?(ve("%cNotice: "+r+" was prevented from loading by the current module mapping configuration.",s),n()):ne(a?r:i+r,u,c,l)}}))}function te(e,t){var n=se(e);return!I[n]&&(I[n]=t,!0)}function ne(e,t,n,r){if(!e)return n&&n(),!1;if(e.match(".js$")||e.match(".ts$")&&!0===j&&!0===L){var o=document.createElement("script");return o.src=e,o.type=!0===r||e.match(".ts$")?"module":"text/javascript",o.onload=t,o.onerror=n,o.charset="UTF-8",document.head.appendChild(o),!0}return ve("%cError: ("+e+") is not recognized as a javascript file.",u),n&&n(),!1}function re(e,t){b[se(e)].ready=!0,function(e){var t=se(e),n=b[t].buffer||[],r=0;for(r=0;r<n.length;r++)!function(e){var t=de(e.command);ve(we(e.commander)+" called the command: "+we(e.command),l,c,l),t&&De((function(){t(e)}))}(n[r]);b[t].buffer=[]}(e),pe(e,"ready",t||{},!0)}function oe(e){var t=function(){try{j&&console.log&&console.log.apply(this,arguments)}catch(e){}};return t.info=function(){try{j&&console.info&&console.info.apply(this,arguments)}catch(e){}},t.warn=function(){try{j&&console.warn&&console.warn.apply(this,arguments)}catch(e){}},t.error=function(){try{j&&console.error&&console.error.apply(this,arguments)}catch(e){}},{publish:function(t,n){return pe(e,t,n)},publishDirect:function(t,n){return pe(e,t,n,!1,!0)},republish:function(t,n){return pe(e,t,n,!0)},subscribe:function(t,n){return ge(e,t,n)},unsubscribe:function(t){return function(e,t){var n=le(e),r=se(t);if(n&&g[r]&&g[r].subscribers){for(var o=[],a=0;a<g[r].subscribers.length;a++)g[r].subscribers[a].subscriber!=e&&o.push(g[r].subscribers[a]);return o.length>0?g[r].subscribers=o:delete g[se(t)],ve(we(e)+" unsubscribed from "+we(t),l,c,l),!0}return!1}(e,t)},command:function(t,n){return he({commander:e,command:t,data:n})},before:function(e,t){return r=t,!!ue(n=e)&&(v[n]||(v[n]=[]),v[n].push(r),!0);var n,r},registerCommand:function(t,n){return me(e,t,n)},registerEvents:function(t){!function(e,t){var n=le(e);q(t=t||[],"string")&&(t=[t]);if(n&&t.length>0){for(var r=0;r<t.length;r++)n.events[t[r]]||(n.events[t[r]]=!0,h[se(e)].events.push(t[r]));return ve(we(e)+" registered the events: %c"+t.join(", "),l,c,l),!0}}(e,t)},namespace:function(){return e+""},subscribers:function(){return function(e){var t={};for(var n in g)if(n.match(se(e))){t[n]||(t[n]=[]);for(var r=0;r<g[n].subscribers.length;r++)t[n].push(g[n].subscribers[r].subscriber)}return t}(e)},data:function(t,n){return 2===arguments.length&&"undefined"==o(arguments[1])?ie(e,t,n,!0):ie(e,t,n)},registry:function(){return h},initData:{},log:t,ready:function(){return re(e)}}}function ae(e,t){for(var n in ve("%cList of "+t+" for: "+we(e.namespace),s,l),e[se(t)])ve("%c"+n,s)}function ie(e,t,n,r){return function(e,t,n,r){var a=se(e);if("undefined"!=o(n)||"undefined"==o(n)&&r){var i;b[a].data[t]?i=b[a].data[t].value:b[a].data[t]=J;o(i);var u=o(n),s={};s.last=i,s.value=n,s.time=ke();var c="data."+t;i==n&&o(i)==o(n)||(pe(e,"data",b[a].data),pe(e,c,s),pe(e,"string"==u?c+":'"+s.value+"'":c+":"+s.value,s,!1,!0)),b[a].data[t]=s}}(e,t,n,r),function(e,t){var n=se(e);if(b[n].data[t])return b[n].data[t].value;if(e&&!t&&b[n])return b[n].data||{};var r=ue(t),o=b[se(r)];if(t=t.replace(r+".",""),o&&o.data[t])return o.data[t].value;return}(e,t)}function ue(e){return e.split(".")[0]}function se(e){return"string"==typeof e?e.toLowerCase():e}function ce(e,t){return se(e)===se(t)}function le(e){return b[se(e)]||b[ue(se(e))]||!1}function fe(e){var t=se(e);return!!b[t]||!!de(t)}function de(e){var t=se(e).split(".")||[],n=!1;return 2==t.length&&(n=le(t[0]))&&n.commands[t[1]]||!1}function me(e,t,n){var r=se(t),o=le(e);return!!o&&(o.commands[r]||h[se(e)].commands.push(t),o.commands[r]=n,o.busID==i&&ve(we(e)+" registered the command: "+we(t),l,c,l),f&&Ge({id:i,childID:i,busID:i,type:"CXBus.remoteExecution",subType:"registerCommand",namespace:e,commandName:t}),!0)}function pe(e,t,n,r,o,a){var u=se(xe([e,t])),s=we(e)+" published: "+we(t),f=se(e)+".*",d=(n=n||{},{time:ke(),publisher:e,event:u,eventName:t,data:n||{}});if(!0===r&&(g[u]?(g[u].republish=!0,g[u].data=n):g[u]={subscribers:[],republish:!0,data:n}),o||a||ve(s,l,c,l),He("publish",u,g[u]),g[u]){o&&!a&&ve(s,l,c,l);for(var m=g[u].subscribers,p=0;p<m.length;p++)De(m[p].callback,d)}if(g[f])for(m=g[f].subscribers,p=0;p<m.length;p++)De(m[p].callback,d);if(g["*"])for(m=g["*"].subscribers,p=0;p<m.length;p++)De(m[p].callback,d);return a||Le("publish",{busID:i,childID:i,event:u,eventName:t,publisher:e,republish:r,direct:o,data:n}),W({type:"publish",time:ke(),source:e,target:u,data:n||{}}),!0}function be(e,t,n,r){ve(we(t)+" republished: "+we(e),l,c,l),De(n,{time:ke(),publisher:t,event:e,data:r}),W({type:"publish",time:ke(),source:t,target:e,data:r||{}})}function ge(e,t,n){if("string"==typeof t){var r=le(e),o=le(t),a=se(t);if(n&&r)return g[a]||(g[a]={subscribers:[],republish:!1}),g[a].subscribers.push({subscriber:e,callback:n}),ve(we(e)+" subscribed to "+we(t),l,c,l),!0===g[a].republish&&o&&be(t,o.namespace,n,g[a].data||{}),Le("subscribe",{busID:i,childID:i,eventName:t,subscriber:e}),t}else if(Array.isArray(t))for(var u=t,s=0;s<u.length;s++)ge(e,u[s],n);return!1}function he(e){var t=e.commander,n=e.command,r=(se(n),e.data),a=e.resolveBuff,s=e.rejectBuff,d=e.buffered;r=r||{},n&&1===n.split(".").length&&(n=xe([t,n])),d||(r=function(e,t){for(var n=v[e]||[],r=0;r<n.length;r++)"object"==o(t)&&!1!==t&&null!=t&&(t=n[r](t));return t}(n,r));var m=de(n),p=ue(n),g=b[se(p)];if(W({type:"command",time:ke(),source:t,target:n,data:r||{}}),f&&!g)return qe({type:"CXBus.remoteExecution",subType:"command",busID:i,pluginName:p,commandName:n,commander:t,data:r});if(!f&&g&&g.busID!=i)return e.message?(e.message.targetID=g.busID,qe(e.message)):qe({type:"CXBus.remoteExecution",subType:"command",busID:i,pluginName:p,commandName:n,commander:t,data:r,targetID:g.busID});if(g&&g.busID==i){var h=ye(n,(function(f,d){var h={time:ke(),commander:t,command:n,resolve:a||f,reject:s||d,data:r||{}};"object"==o(r)&&!1!==r&&null!=r?g&&g.busID==i&&(ve(we(t)+" called the command: "+we(n),l,c,l),g.ready||p==t?m?m(h):(e.message&&(e.message.resolution="fail",e.message.resolutionData="Command does not exist"),h.reject("Command does not exist")):g.ready||(ve("%c"+we(p)+" is loading and/or has not yet called its ready() method. Your command call ("+n+") has been buffered and will be executed once the plugin has loaded and/or called its ready() method.",u,u,u),function(e,t){b[se(e)].buffer.push(t)}(p,h))):(e.message.resolution="fail",e.message.resolutionData="Command was cancelled by a 'before' function.",h.reject("Command was cancelled by a 'before' function.")),e.message&&"fail"==e.message.resolution&&qe(e.message)}));return e.message&&h.then((function(t){e.message.resolution="pass",e.message.resolutionData=t,qe(e.message)})).catch((function(t){e.message.resolution="fail",e.message.resolutionData=t,qe(e.message)})),h}return f||g?void 0:ye(n,(function(o,a){ve("%c'"+p+"' plugin not currently registered. Attempting to load plugin from configured path ("+E+").",l),Q(p).then((function(){he({commander:t,command:n,data:r,resolveBuff:o,rejectBuff:a,buffered:!0})}),(function(){e.message.resolution="fail",e.message.resolutionData=U,a(U)}))}))}function ye(e,t){var n=new a(t);return n.catch((function(t){ve("%cError ("+we(e)+"): ",u,u,u),console.error&&t&&console.error(t)})),n}function ve(e,t,n,r,a,i){try{T&&(_&&N.push(e+""),j&&console&&console.log&&"string"==o(e)&&("%c"==e.substr(e.length-2,2)&&(e=e.substr(0,e.length-2)),console.log.apply(this,arguments)))}catch(e){He("logging error!")}}function we(e){return"%c"+e+"%c"}function De(e,t,n,r){A||r?setTimeout((function(){e(t)}),n||0):e(t)}function xe(e){return e.join(".")}function Ie(e){return e&&"/"!=e[e.length-1]?e+"/":e}function Ne(){if(d)C.push(arguments);else{var e=arguments,t=e[0]||"";switch(t){case"registerPlugin":H(e[1]).then(e[2]||F,e[3]||F);break;case"command":"function"==o(e[2])?he({commander:"Genesys",command:e[1],data:{}}).then(e[2]||F,e[3]||F):he({commander:"Genesys",command:e[1],data:e[2]||{}}).then(e[3]||F,e[4]||F);break;case"subscribe":"string"!=o(e[1])&&!Array.isArray(e[1])||"function"!=o(e[2])||ge("Genesys",e[1],e[2]);break;case"monitor":"function"==o(e[1])&&Y(e[1]);break;case"registerChild":Pe(e[1]);break;case"registerModule":te(e[1],e[2]);break;case"executeQueue":je();break;case"loadPlugin":"function"!=typeof e[3]?Q(e[1],e[2],e[3]).then(e[4]||F,e[5]||F):Q(e[1],e[2],!1).then(e[3]||F,e[4]||F);break;case"loadFile":K(e[1]).then(e[2]||F,e[3]||F);break;case"loadModule":ee(e[1]).then(e[2]||F,e[3]||F);break;case"loadJSON":Z(e[1]).then(e[2]||F,e[3]||F);break;case"configure":if(!e[1])return Ce();R(e[1]||{});break;case"lookup":return fe(e[1]);default:return!1}}return!0}function Ce(){return ve("CXBus Configuration\n----------------------------\nDEBUG: \t\t\t\t\t"+j+"\nBUS_NAME: \t\t\t\t"+k+"\nPLUGINS_PATH: \t\t\t"+(E||'""')+"\nMODULES_PATH: \t\t\t"+(P||'""')+"\nPLUGIN_FILENAME_FORMAT: "+M+"\nMODULE_FILENAME_FORMAT: module.mod.js\nPLUGIN_MAP: \t\t\t"+JSON.stringify(O)+"\nMODULE_MAP: \t\t\t"+JSON.stringify(S)+"\nASYNC: \t\t\t\t\t"+A+"\nCHILD_MODE: \t\t\t"+B+"\nCHILD_DOMAIN: \t\t\t"+G+"\nPARENT_DOMAIN: \t\t\t*\nALLOW_TYPESCRIPT: \t\t"+L),{debug:j,name:k,pluginsPath:E,modulesPath:P,pluginFilenameFormat:M,moduleFilenameFormat:"module.mod.js",pluginMap:O,moduleMap:S,async:A,childMode:B,childDomain:G,parentDomain:"*",allowTypeScript:L}}function je(e){if(C){ve("%cExecuting "+C.length+" items from the queue...",s);for(var t=0;t<C.length;t++)Ne.apply(this,C[t])}}function ke(){return(new Date).getTime()}if(window.Genesys)for(var Te=Object.keys(window.Genesys),_e=0;_e<Te.length;_e++)Ne[Te[_e]]=window.Genesys[Te[_e]];window.Genesys=Ne,H("Genesys"),"function"==o(n(3))&&n(4)&&(void 0===(r=function(){return window.Genesys}.apply(t,[]))||(e.exports=r));var Ee={};function Pe(e){return!!e&&(e.contentWindow&&(e=e.contentWindow),Ee[id]={id:id,name:void 0,busID:void 0,intvl:setInterval((function(){Me(e,id)}),500),callAttempts:0,registered:!1,window:e,registry:[]},Me(e,id),!0)}function Me(e,t){e.postMessage({type:"CXBus.parentCallout",childID:t,busID:i,busName:k},G),Ee[t].callAttempts++}function Oe(e,t,n,r){Ee[t]&&!Ee[t].registered?(clearInterval(Ee[t].intvl),Ee[t].registered=ke(),Ee[t].registry=r,Ee[t].busID=busID,Ee[t].busName=n):(Ee[t]={id:t,busID:t,busName:n,intvl:!1,callAttempts:0,registered:ke(),window:e,registry:r},e.postMessage({type:"CXBus.parentCallback",busID:t,busName:k},G))}function Se(e,t,n,r){d=!1,f=e,je()}function Ae(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function Be(e,t){Ee[e]&&(t=t||{},Ee[e].window.postMessage(t,G))}function Ge(e){f&&f.postMessage(e,"*")}function Le(e,t){if(He("broadcast",e,t),(t=t||{}).subType=e,t.type="CXBus.broadcast",f)Ge(t);else for(var n in Ee)Be(n,t)}var Xe,Fe,Je=document.getElementById("genesys-cxbus"),Ue={},Re={src:0,charset:0,id:0,type:0,queue:0,pluginmap:0,modulemap:0};if(Je){for(_e=0;_e<Je.attributes.length;_e++)Xe=se(Je.attributes[_e].nodeName),"true"===(Fe=Je.attributes[_e].nodeValue)&&(Fe=!0),"false"===Fe&&(Fe=!1),Re[Xe]||(Ue[Xe]=Fe);R(Ue)}function qe(e){var t;if(e.id)t=e.id;else{for(t=Ae();p[t];)t=Ae();e.id=t}return ye("remoteExecution",(function(n,r){if(p[t]={success:n,fail:r},f)f&&e.id!=i&&Ge(e);else if(e.resolution)Be(e.busID,e);else if(z(e.targetBus)){var o=function(e){for(var t in Ee){var n=Ee[t];if(ce(n.busName,e))return n.id}return!1}(e.targetBus);o&&Be(o,e)}else e.targetID&&Be(e.targetID,e)}))}function He(){var e=Array.prototype.slice.call(arguments);e.unshift("["+window.name+"]")}window.addEventListener("message",(function(e){m.push(e),function(){for(;m.length>0;){var e=m.shift(),t=e.data,n=p[t.id];switch(t.type){case"CXBus.parentCallout":B&&Se(e.source,t.busID,t.busName,t.parentRegistry);break;case"CXBus.childCallout":B||Oe(e.source,t.busID,t.busName,t.registry);break;case"CXBus.parentCallback":B&&Se(e.source,t.busID,t.busName,t.parentRegistry);break;case"CXBus.childCallback":B||Oe(e.source,t.busID,t.busName,t.registry);break;case"CXBus.broadcast":f||Le(e.data.subType,t);var r=se(t.eventName),o=g[r]||!1;switch(e.data.subType){case"subscribe":if(void 0===t.eventData&&o&&!0===o.republish){var a=le(t.eventName);t.eventNamespace=a?a.namespace:"",t.eventData=o.data||{},t.subType="republish",Be(t.busID,t)}break;case"publish":pe(t.publisher,t.eventName,t.data,t.republish,t.direct,!0);break;case"republish":for(var u=null,s=0;s<o.subscribers.length;s++)o.subscribers[s].subscriber==t.subscriber&&(u=o.subscribers[s].callback);u&&be(t.eventName,t.eventNamespace,u,t.eventData||{})}break;case"CXBus.remoteExecution":switch(t.subType){case"loadPlugin":var c=p[t.id];t.resolution?t.resolution&&c&&("pass"==t.resolution?c.success(t.resolutionData):"fail"==t.resolution&&c.fail(t.resolutionData),f||t.busID==i||qe(t),delete p[t.id]):ce(k,t.targetBus)&&Q(t.pluginName,t.data).then((function(){return t.resolution="pass",qe(t)}),(function(){return t.resolution="fail",t.resolutionData=U,qe(t)}));break;case"registerPlugin":f||(le(t.pluginName)?(t.resolution="fail",Be(t.busID,t)):(t.resolution="pass",Be(t.busID,t),H(t.pluginName,!0,t.busID))),n&&t.resolution&&("pass"==t.resolution?n.success(t):"fail"==t.resolution&&n.fail(t));break;case"registerCommand":f||me(t.namespace,t.commandName,F);break;case"command":c=p[t.id];var l=ue(t.commandName),d=b[se(l)];if(t.resolution)t.resolution&&c&&("pass"==t.resolution?c.success(t.resolutionData):"fail"==t.resolution&&c.fail(t.resolutionData),f||t.busID==i||qe(t),delete p[t.id]);else if(!f&&d&&d.busID&&d.busID!=i)t.targetID=d.busID,qe(t),W({type:"command",time:ke(),source:t.commander,target:t.commandName,data:t.data||{}});else if(d&&d.busID&&d.busID==i)he({commander:t.commander,command:t.commandName,data:t.data,message:t});else if(!f&&!d)return t.resolution="fail",t.resolutionData="Plugin does not exist and no plugins path is configured",qe(t)}}}}()}),!1)}()}.apply(t,[]))||(e.exports=r)},function(e,t,n){(function(r){var o;!function(r){var a=r.Promise,i=a&&"resolve"in a&&"reject"in a&&"all"in a&&"race"in a&&function(){var e;return new a((function(t){e=t})),"function"==typeof e}();t?(t.Promise=i?a:x,t.Polyfill=x):void 0===(o=function(){return i?a:x}.call(t,n,t,e))||(e.exports=o);var u=function(){};function s(e){return"[object Array]"===Object.prototype.toString.call(e)}var c,l="undefined"!=typeof setImmediate?setImmediate:setTimeout,f=[];function d(){for(var e=0;e<f.length;e++)f[e][0](f[e][1]);f=[],c=!1}function m(e,t){f.push([e,t]),c||(c=!0,l(d,0))}function p(e){var t=e.owner,n=t.state_,r=t.data_,o=e[n],a=e.then;if("function"==typeof o){n="fulfilled";try{r=o(r)}catch(e){y(a,e)}}b(a,r)||("fulfilled"===n&&g(a,r),"rejected"===n&&y(a,r))}function b(e,t){var n;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(t&&("function"==typeof t||"object"==typeof t)){var r=t.then;if("function"==typeof r)return r.call(t,(function(r){n||(n=!0,t!==r?g(e,r):h(e,r))}),(function(t){n||(n=!0,y(e,t))})),!0}}catch(t){return n||y(e,t),!0}return!1}function g(e,t){e!==t&&b(e,t)||h(e,t)}function h(e,t){"pending"===e.state_&&(e.state_="sealed",e.data_=t,m(w,e))}function y(e,t){"pending"===e.state_&&(e.state_="sealed",e.data_=t,m(D,e))}function v(e){var t=e.then_;e.then_=void 0;for(var n=0;n<t.length;n++)p(t[n])}function w(e){e.state_="fulfilled",v(e)}function D(e){e.state_="rejected",v(e)}function x(e){if("function"!=typeof e)throw new TypeError("Promise constructor takes a function argument");if(this instanceof x==!1)throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this.then_=[],function(e,t){function n(e){y(t,e)}try{e((function(e){g(t,e)}),n)}catch(e){n(e)}}(e,this)}x.prototype={constructor:x,state_:"pending",then_:null,data_:void 0,then:function(e,t){var n={owner:this,then:new this.constructor(u),fulfilled:e,rejected:t};return"fulfilled"===this.state_||"rejected"===this.state_?m(p,n):this.then_.push(n),n.then},catch:function(e){return this.then(null,e)}},x.all=function(e){if(!s(e))throw new TypeError("You must pass an array to Promise.all().");return new this((function(t,n){var r=[],o=0;function a(e){return o++,function(n){r[e]=n,--o||t(r)}}for(var i,u=0;u<e.length;u++)(i=e[u])&&"function"==typeof i.then?i.then(a(u),n):r[u]=i;o||t(r)}))},x.race=function(e){if(!s(e))throw new TypeError("You must pass an array to Promise.race().");return new this((function(t,n){for(var r,o=0;o<e.length;o++)(r=e[o])&&"function"==typeof r.then?r.then(t,n):t(r)}))},x.resolve=function(e){return e&&"object"==typeof e&&e.constructor===this?e:new this((function(t){t(e)}))},x.reject=function(e){return new this((function(t,n){n(e)}))}}("undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:this)}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){(function(t){e.exports=t}).call(this,{})}])}));