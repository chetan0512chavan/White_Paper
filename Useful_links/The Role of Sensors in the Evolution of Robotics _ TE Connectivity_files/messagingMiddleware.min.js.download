/*!
 * messenger
 * @version: 2.14.1
 * @license: Genesys Cloud Services, Inc.
 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.messagingMiddleware=n():e.messagingMiddleware=n()}(window,(function(){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e,n,t){"use strict";t.r(n),t.d(n,"connect",(function(){return r})),t.d(n,"connecting",(function(){return i})),t.d(n,"reconnect",(function(){return o})),t.d(n,"reconnecting",(function(){return d})),t.d(n,"connected",(function(){return a})),t.d(n,"reconnected",(function(){return c})),t.d(n,"disconnect",(function(){return s})),t.d(n,"disconnected",(function(){return u})),t.d(n,"pending",(function(){return p})),t.d(n,"readyToSend",(function(){return f})),t.d(n,"restored",(function(){return E})),t.d(n,"restoring",(function(){return l})),t.d(n,"reopen",(function(){return g})),t.d(n,"restoreAuthSession",(function(){return y})),t.d(n,"fetchHistory",(function(){return S})),t.d(n,"fetchingHistory",(function(){return T})),t.d(n,"historyFetched",(function(){return C})),t.d(n,"historyComplete",(function(){return N})),t.d(n,"requestUpload",(function(){return O})),t.d(n,"requestingUpload",(function(){return h})),t.d(n,"uploadApproved",(function(){return m})),t.d(n,"uploadFile",(function(){return R})),t.d(n,"fileUploading",(function(){return I})),t.d(n,"fileUploaded",(function(){return F})),t.d(n,"fileUploadFailed",(function(){return v})),t.d(n,"fileDownloadError",(function(){return D})),t.d(n,"getFile",(function(){return A})),t.d(n,"refreshFiles",(function(){return L})),t.d(n,"refreshingFiles",(function(){return M})),t.d(n,"requestingFile",(function(){return U})),t.d(n,"messagesUpdated",(function(){return P})),t.d(n,"deleteFile",(function(){return b})),t.d(n,"deletingFile",(function(){return w})),t.d(n,"fileDeleted",(function(){return G})),t.d(n,"downloadFile",(function(){return H})),t.d(n,"allowedFileTypesUpdated",(function(){return k})),t.d(n,"send",(function(){return _})),t.d(n,"sending",(function(){return j})),t.d(n,"sendTextBack",(function(){return x})),t.d(n,"sendingTextBack",(function(){return V})),t.d(n,"sendTyping",(function(){return Y})),t.d(n,"received",(function(){return B})),t.d(n,"sendingMessage",(function(){return W})),t.d(n,"receivedTyping",(function(){return q})),t.d(n,"resetTyping",(function(){return K})),t.d(n,"clearTypingTimeout",(function(){return Q})),t.d(n,"userTyping",(function(){return X})),t.d(n,"openedConversation",(function(){return z})),t.d(n,"online",(function(){return J})),t.d(n,"addMessages",(function(){return Z})),t.d(n,"end",(function(){return $})),t.d(n,"ended",(function(){return ee})),t.d(n,"clearConversation",(function(){return ne})),t.d(n,"conversationCleared",(function(){return te})),t.d(n,"messengerCleared",(function(){return re})),t.d(n,"closed",(function(){return ie})),t.d(n,"openWithStore",(function(){return oe})),t.d(n,"logout",(function(){return de})),t.d(n,"reAuthenticate",(function(){return ae})),t.d(n,"authenticated",(function(){return ce})),t.d(n,"steppingUpConversation",(function(){return se})),t.d(n,"conversationSteppedUp",(function(){return ue})),t.d(n,"stepupFailed",(function(){return pe})),t.d(n,"sessionLoggedOut",(function(){return fe})),t.d(n,"error",(function(){return Ee})),t.d(n,"clearError",(function(){return le})),t.d(n,"startFailed",(function(){return ge})),t.d(n,"sendFailed",(function(){return ye})),t.d(n,"restoreFailed",(function(){return Se})),t.d(n,"reconnectFailed",(function(){return Te})),t.d(n,"offline",(function(){return Ce})),t.d(n,"sessionExpired",(function(){return Ne})),t.d(n,"fetchHistoryFailed",(function(){return Oe})),t.d(n,"clearSession",(function(){return he})),t.d(n,"resetConversation",(function(){return me})),t.d(n,"sessionCleared",(function(){return Re})),t.d(n,"connectionClosed",(function(){return Ie})),t.d(n,"readOnly",(function(){return Fe})),t.d(n,"conversationNotFound",(function(){return ve}));const r=e=>({type:"CONNECT",data:e}),i=()=>({type:"CONNECTING"}),o=e=>({type:"RECONNECT",data:e}),d=e=>({type:"RECONNECTING",data:e}),a=e=>({type:"CONNECTED",data:e}),c=e=>({type:"RECONNECTED",data:e}),s=()=>({type:"DISCONNECT"}),u=e=>({type:"DISCONNECTED",data:e}),p=()=>({type:"PENDING"}),f=()=>({type:"READYTOSEND"}),E=e=>({type:"RESTORED",data:e}),l=()=>({type:"RESTORING"}),g=e=>({type:"REOPEN",data:e}),y=()=>({type:"RESTOREAUTHSESSION"}),S=()=>({type:"FETCHHISTORY"}),T=()=>({type:"FETCHINGHISTORY"}),C=e=>({type:"HISTORYFETCHED",data:e}),N=()=>({type:"HISTORYCOMPLETE"}),O=e=>({type:"REQUESTUPLOAD",data:e}),h=e=>({type:"REQUESTINGUPLOAD",data:e}),m=e=>({type:"UPLOADAPPROVED",data:e}),R=e=>({type:"UPLOADFILE",data:e}),I=e=>({type:"FILEUPLOADING",data:e}),F=e=>({type:"FILEUPLOADED",data:e}),v=e=>({type:"FILEUPLOADFAILED",data:e}),D=e=>({type:"FILEDOWNLOADERROR",data:e}),A=e=>({type:"GETFILE",data:e}),L=e=>({type:"REFRESHFILES",data:e}),M=e=>({type:"REFRESHINGFILES",data:e}),U=e=>({type:"REQUESTINGFILE",data:e}),P=e=>({type:"MESSAGESUPDATED",data:e}),b=e=>({type:"DELETEFILE",data:e}),w=e=>({type:"DELETINGFILE",data:e}),G=e=>({type:"FILEDELETED",data:e}),H=e=>({type:"DOWNLOADFILE",data:e}),k=e=>({type:"ALLOWEDFILETYPESUPDATED",data:e}),_=e=>({type:"SEND",data:e}),j=()=>({type:"SENDING"}),x=e=>({type:"SENDTEXTBACK",data:e}),V=()=>({type:"SENDINGTEXTBACK"}),Y=()=>({type:"SENDTYPING"}),B=e=>({type:"RECEIVED",data:e}),W=e=>({type:"SENDINGMESSAGE",data:e}),q=e=>({type:"RECEIVEDTYPING",data:e}),K=()=>({type:"RESETTYPING"}),Q=()=>({type:"CLEARTYPINGTIMEOUT"}),X=()=>({type:"USERTYPING"}),z=()=>({type:"OPENEDCONVERSATION"}),J=e=>({type:"ONLINE",data:e}),Z=e=>({type:"ADDMESSAGES",data:e}),$=e=>({type:"END",data:e}),ee=e=>({type:"ENDED",data:e}),ne=e=>({type:"CLEARCONVERSATION",data:e}),te=e=>({type:"CONVERSATIONCLEARED",data:e}),re=()=>({type:"CLEARMESSENGER"}),ie=()=>({type:"CLOSED"}),oe=e=>({type:"OPEN-WITH-STORE",data:e}),de=()=>({type:"LOGOUT"}),ae=()=>({type:"REAUTHENTICATE"}),ce=()=>({type:"AUTHENTICATED"}),se=()=>({type:"STEPPINGUPCONVERSATION"}),ue=()=>({type:"CONVERSATIONSTEPPEDUP"}),pe=()=>({type:"STEPUPFAILED"}),fe=()=>({type:"SESSIONLOGGEDOUT"}),Ee=e=>({type:"ERROR",data:e}),le=()=>({type:"CLEARERROR"}),ge=e=>({type:"STARTFAILED",data:e}),ye=e=>({type:"SENDFAILED",data:e}),Se=e=>({type:"RESTOREFAILED",data:e}),Te=e=>({type:"RECONNECTFAILED",data:e}),Ce=e=>({type:"OFFLINE",data:e}),Ne=e=>({type:"SESSIONEXPIRED",data:e}),Oe=e=>({type:"FETCHHISTORYFAILED",data:e}),he=e=>({type:"CLEARSESSION",data:e}),me=e=>({type:"RESETCONVERSATION"}),Re=e=>({type:"SESSIONCLEARED",data:e}),Ie=()=>({type:"CONNECTIONCLOSED"}),Fe=e=>({type:"READONLY",data:e}),ve=()=>({type:"CONVERSATIONNOTFOUND"})},function(e,n,t){"use strict";function r(e){return{type:"CONFIRM_CHAT",route:e.route}}function i(e){return{type:"OPEN_CONVERSATIONS",route:e.route}}function o(e){return{type:"OPEN_COBROWSE_CONNECT",route:e.route}}function d(e){return{type:"COBROWSE_SHARE",route:e.route,cobrowseConnectStatus:e.cobrowseConnectStatus}}function a(e){return{type:"COBROWSE_CONNECT_STATUS",cobrowseConnectStatus:e.cobrowseConnectStatus}}function c(e){return{type:"OPEN_PREVIEW",route:e.route,file:e.file}}function s(e){return{type:"OPEN_DATE_PICKER",route:e.route}}function u(e){return{type:"OPEN_LIST_PICKER",route:e.route}}function p(){return{type:"NAVIGATE_BACK"}}function f(e){const{cobrowseConnectStatus:n}=e||{};return{type:"NAVIGATE_TO_HOME",cobrowseConnectStatus:n||""}}t.r(n),t.d(n,"confirmChat",(function(){return r})),t.d(n,"openConversations",(function(){return i})),t.d(n,"openCobrowseConnect",(function(){return o})),t.d(n,"cobrowseShare",(function(){return d})),t.d(n,"setCobrowseConnectStatus",(function(){return a})),t.d(n,"openPreview",(function(){return c})),t.d(n,"openDatePicker",(function(){return s})),t.d(n,"openListPicker",(function(){return u})),t.d(n,"navigateBack",(function(){return p})),t.d(n,"navigateToHome",(function(){return f})),t.d(n,"setConfig",(function(){return l})),t.d(n,"getConfig",(function(){return g}));let E={};function l(e){e&&(E=e)}function g(){return E}},function(e,n,t){e.exports=t},function(e,n,t){"use strict";t.r(n),t.d(n,"onMessage",(function(){return o})),t.d(n,"onTyping",(function(){return d})),t.d(n,"onTypingTimeout",(function(){return a})),t.d(n,"onReadyToSend",(function(){return c})),t.d(n,"onStarting",(function(){return s})),t.d(n,"onStart",(function(){return u})),t.d(n,"onSendingMessage",(function(){return p})),t.d(n,"onMessageError",(function(){return f})),t.d(n,"onEnd",(function(){return E})),t.d(n,"onDisconnect",(function(){return l})),t.d(n,"onError",(function(){return g})),t.d(n,"onStartFailed",(function(){return y})),t.d(n,"onSendFailed",(function(){return S})),t.d(n,"onSessionExpired",(function(){return T})),t.d(n,"onSessionCleared",(function(){return C})),t.d(n,"onFetchHistoryFailed",(function(){return N})),t.d(n,"onRestoring",(function(){return O})),t.d(n,"onRestoreFailed",(function(){return h})),t.d(n,"onRestored",(function(){return m})),t.d(n,"onFetchingHistory",(function(){return R})),t.d(n,"onHistoryFetched",(function(){return I})),t.d(n,"onHistoryComplete",(function(){return F})),t.d(n,"onReconnecting",(function(){return v})),t.d(n,"onReopen",(function(){return D})),t.d(n,"onConnectionClosed",(function(){return A})),t.d(n,"onConversationCleared",(function(){return L})),t.d(n,"onOffline",(function(){return M})),t.d(n,"onOnline",(function(){return U})),t.d(n,"onReconnected",(function(){return P})),t.d(n,"onUploadApproved",(function(){return b})),t.d(n,"onFileUploaded",(function(){return w})),t.d(n,"onFileUploadFailed",(function(){return G})),t.d(n,"onFileDownloadError",(function(){return H})),t.d(n,"onFileUploading",(function(){return k})),t.d(n,"onFileDeleted",(function(){return _})),t.d(n,"onMessagesUpdated",(function(){return j})),t.d(n,"onLogout",(function(){return x})),t.d(n,"onReauthenticate",(function(){return V})),t.d(n,"onAuthenticated",(function(){return Y})),t.d(n,"onReadOnly",(function(){return B})),t.d(n,"onSessionReset",(function(){return W})),t.d(n,"onConversationNotFound",(function(){return q})),t.d(n,"onAllowedFileTypesUpdated",(function(){return K})),t.d(n,"onConversationSteppedUp",(function(){return Q})),t.d(n,"onSteppingUpConversation",(function(){return X})),t.d(n,"onStepupFailed",(function(){return z})),t.d(n,"onMessengerCleared",(function(){return J})),t.d(n,"onReconnectFailed",(function(){return Z}));var r=t(0),i=t(1);let o=()=>{},d=()=>{},a=()=>{},c=()=>{},s=()=>{},u=()=>{},p=()=>{},f=()=>{},E=()=>{},l=()=>{},g=()=>{},y=()=>{},S=()=>{},T=()=>{},C=()=>{},N=()=>{},O=()=>{},h=()=>{},m=()=>{},R=()=>{},I=()=>{},F=()=>{},v=()=>{},D=()=>{},A=()=>{},L=()=>{},M=()=>{},U=()=>{},P=()=>{},b=()=>{},w=()=>{},G=()=>{},H=()=>{},k=()=>{},_=()=>{},j=()=>{},x=()=>{},V=()=>{},Y=()=>{},B=()=>{},W=()=>{},q=()=>{},K=()=>{},Q=()=>{},X=()=>{},z=()=>{},J=()=>{},Z=()=>{};n.default=(()=>{let e="",n=!1,t={},f={},W=!1,$="";return Genesys("registerPlugin","MessagingMiddleware",(function(t){e=t;const o=e=>{const{text:n,messageType:t,type:r,timestamp:i,originatingEntity:o,id:d,...a}=e||{};return{id:d||Math.round(1e6*Math.random()),messageType:t,originatingEntity:o||"",text:n,timestamp:i||Date().toString(),type:r,...a}};e.registerCommand("showTyping",(function(e){let n=i.getConfig(),{preview:t}=n,o=5e3,{duration:d}=e.data||{};d&&"number"==typeof d&&!Number.isNaN(d)&&(o=d),t?(f.dispatch(r.connected()),f.dispatch(r.receivedTyping({type:"On"})),$||($=setTimeout((()=>{f.dispatch(r.resetTyping()),$=""}),o)),e.resolve()):e.reject("Command is allowed only in preview mode.")})),e.registerCommand("removeTyping",(function(e){let n=i.getConfig(),{preview:t}=n;t?(f.dispatch(r.connected()),f.dispatch(r.resetTyping()),$="",e.resolve()):e.reject("Command is allowed only in preview mode.")})),e.registerCommand("addMessages",(function(e){let n=i.getConfig(),{preview:t}=n;if(t)if(e.data){if(Array.isArray(e.data)){const n=[];e.data.forEach((e=>{n.push(o(e))})),f.dispatch(r.connected()),f.dispatch(r.addMessages(n)),e.resolve()}else if("object"==typeof e.data){const n=o(e.data);f.dispatch(r.connected()),f.dispatch(r.received(n||e.data.message)),e.resolve()}}else e.reject("No messages to add");else e.reject("Command is allowed only in preview mode.")})),e.registerCommand("updateMessages",(function(e){let n=i.getConfig(),{preview:t}=n;if(t)if(e.data){if(Array.isArray(e.data)){const n=[];e.data.forEach((e=>{e={...e,updatedTime:(new Date).toISOString()},n.push(o(e))})),f.dispatch(r.connected()),f.dispatch(r.messagesUpdated({updatedMessages:n})),e.resolve()}else if("object"==typeof e.data){let n=o(e.data);n={...n,updatedTime:(new Date).toISOString()},f.dispatch(r.connected()),f.dispatch(r.messagesUpdated({updatedMessages:[n||{...e.data,updatedTime:(new Date).toISOString()}]})),e.resolve()}}else e.reject("No messages to add");else e.reject("Command is allowed only in preview mode.")})),e.registerCommand("clear",(function(e){let n=i.getConfig(),{preview:t}=n;t?(f.dispatch(r.sessionCleared({messages:[]})),e.resolve()):e.reject("Command only allowed in preview mode")})),e.subscribe("MessagingPreview.ready",(()=>{n=!0})),W||(e.ready(),W=!0)})),$=>ee=>ne=>{f=$,s=e=>{$.dispatch(r.connecting(e))},O=()=>{$.dispatch(r.restoring())},m=e=>{$.dispatch(r.restored(e))},R=()=>{$.dispatch(r.fetchingHistory())},I=e=>{$.dispatch(r.historyFetched(e))},F=()=>{$.dispatch(r.historyComplete())},y=e=>{$.dispatch(r.startFailed(e))},T=()=>{$.dispatch(r.sessionExpired())},N=e=>{$.dispatch(r.fetchHistoryFailed(e))},S=e=>{$.dispatch(r.sendFailed(e))},G=e=>{$.dispatch(r.fileUploadFailed(e))},H=e=>{$.dispatch(r.fileDownloadError(e))},k=e=>{$.dispatch(r.fileUploading(e))},w=e=>{$.dispatch(r.fileUploaded(e))},j=e=>{$.dispatch(r.messagesUpdated(e))},_=e=>{$.dispatch(r.fileDeleted(e))},h=e=>{$.dispatch(r.restoreFailed(e))},Z=e=>{$.dispatch(r.reconnectFailed(e))},M=e=>{$.dispatch(r.offline(e))},U=e=>{$.dispatch(r.online(e))},P=e=>{$.dispatch(r.reconnected(e))},v=e=>{$.dispatch(r.reconnecting(e))},A=()=>{$.dispatch(r.connectionClosed())},L=e=>{$.dispatch(r.conversationCleared(e))},g=e=>{$.dispatch(r.error(e))},o=e=>{e&&e.messages&&$.dispatch(r.received(e.messages))},p=e=>{$.dispatch(r.sendingMessage(e))},d=e=>{e&&e.typing&&$.dispatch(r.receivedTyping(e.typing))},a=()=>{$.dispatch(r.resetTyping())},c=()=>{$.dispatch(r.readyToSend())},u=e=>{$.dispatch(r.connected(e))},C=e=>{$.dispatch(r.sessionCleared(e))},D=e=>{$.dispatch(r.reopen(e))},x=()=>{$.dispatch(r.logout())},V=()=>{$.dispatch(r.reAuthenticate())},Y=()=>{$.dispatch(r.authenticated())},X=()=>{$.dispatch(r.steppingUpConversation())},Q=()=>{$.dispatch(r.conversationSteppedUp())},z=()=>{$.dispatch(r.stepupFailed())},J=()=>{$.dispatch(r.messengerCleared())},B=e=>{$.dispatch(r.readOnly(e))},l=e=>{$.dispatch(r.disconnected(e))},q=()=>{$.dispatch(r.conversationNotFound())},K=e=>{$.dispatch(r.allowedFileTypesUpdated(e))},t=i.getConfig();const{preview:te}=t||{};switch(e&&!W&&(e.ready(),W=!0),ne.type){case"CONNECT":if(!te){let n=i.getConfig(),{preview:t}=n;t?$.dispatch(r.connected()):e.command("MessagingService.configureConversation",ne.data)}break;case"RECONNECT":if(!te){let n=i.getConfig(),{preview:t}=n;t?$.dispatch(r.reconnected()):e.command("MessagingService.reconnect",ne.data||{})}break;case"SEND":te&&n?e.command("MessagingPreview.sendMessage",ne.data).then((e=>{$.dispatch(r.received(e))})):($.dispatch(r.sending()),e.command("MessagingService.sendMessage",ne.data));break;case"SENDTEXTBACK":te&&n?e.command("MessagingPreview.sendMessage",ne.data).then((e=>{$.dispatch(r.received(e))})):($.dispatch(r.sendingTextBack()),e.command("MessagingService.sendMessage",ne.data));break;case"SENDTYPING":$.dispatch(r.userTyping()),te||e.command("MessagingService.sendTyping");break;case"CLEARTYPINGTIMEOUT":$.dispatch(r.resetTyping()),te||e.command("MessagingService.clearTypingTimeout");break;case"OPENEDCONVERSATION":Genesys("subscribe","MessagingMiddleware.ready",(()=>{setTimeout((()=>{te||e.command("MessagingService.joinConversation")}),200)}));break;case"REQUESTUPLOAD":te||(b=e=>{e&&$.dispatch(r.uploadApproved(e))},$.dispatch(r.requestingUpload(ne.data)),e.command("MessagingService.requestUpload",{file:ne.data}));break;case"UPLOADFILE":te||($.dispatch(r.fileUploading()),e.command("MessagingService.uploadFile",ne.data));break;case"DELETEFILE":te||($.dispatch(r.deletingFile()),e.command("MessagingService.deleteFile",ne.data));break;case"GETFILE":te||($.dispatch(r.requestingFile()),e.command("MessagingService.getFile",ne.data));break;case"REFRESHFILES":te||($.dispatch(r.refreshingFiles()),e.command("MessagingService.refreshFiles",{files:ne.data}));break;case"END":te||(E=e=>{$.dispatch(r.ended(e))},e.command("MessagingService.endConversation"));break;case"CLEARSESSION":e.command("MessagingService.clearSession",ne.data);break;case"RESETCONVERSATION":e.command("MessagingService.resetConversation",ne.data);break;case"CLEARCONVERSATION":e.command("MessagingService.clearConversation",ne.data);break;case"FETCHHISTORY":te||(I=e=>{$.dispatch(r.historyFetched(e))},e&&e.command("MessagingService.fetchHistory"));break;case"DOWNLOADFILE":te||e.command("MessagingService.downloadFile",ne.data);break;case"RESTOREAUTHSESSION":te||e.command("MessagingService.restoreAuthSession");break;default:return ee(ne)}}})()}])}));